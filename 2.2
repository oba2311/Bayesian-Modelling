---
title: "CS 146 2.2"
output: html_notebook
---
**Basketball Example**
We model a player’s free throw rate using two variables — average skill and variability.
Average skill is a real number (ℝ) that indicates how often we expect a player to make free throws over many games played. The higher a player’s average skill, the higher we expect their average free throw rate to be in the long run.
Variability is a positive real number (ℝ⁺) that indicates how much we expect a player’s skill to fluctuate between different games. Some players are very reliable and will almost always perform at the same level, while others have on days and off days with very variable performance.
```{r}
#sⱼ = Normal(μ, σ²)  A player’s skill during a particular game (let’s call it game number j and the skill during that game sⱼ) is then modeled as a sample from a normal distribution with mean μ and standard deviation σ.

#To map the skill, which is a real number, to the free throw rate, rⱼ, we use the logistic transformation.

#rⱼ = logistic(sⱼ) = 1 / (1 + exp(–sⱼ))  #Here exp is the exponential function, exp(x) = eˣ. The logistic function is also a standard part of logistic regression, which you will see more of later in the course.
```
Questions:
What is the range of values that rⱼ can take on? Explain why this range makes sense for the free throw rate.
```{r}
#if sⱼ is taken from Normal(μ, σ²), then it could be any real number.
#rⱼ = = 1 / (1 + exp(–Sⱼ)) , so 1/positive number is always positive, and therefore the whole expression is positive i.e.   rⱼ is always positive.
```
Using this model, explain why high variability (σ) models a player whose skill level changes a lot between different games.
```{r}
#since sⱼ = Normal(μ, σ²) is the skill level, it is basically a sample from normal dist. Once the variance is larger, the tails are thicker and so the sample is more likely to fall further from the mean.
```
In class you will estimate the average skill and variability of basketball players from their free throw rate data. The data for one player will look something like this:
Game 1 throw rate: 75% Game 2 throw rate: 80% Game 3 throw rate: 95% etc.
Questions:
What are the unobserved parameters of this model?
```{r}
#We get data, so the unobserved parameters are te variability and the average skill.
```
What are the observed data in this model?
```{r}
#observed data are free throws rate per game.
```
What is the likelihood function of this model?
```{r}
#Likelihood is: 
#P(data |variability , average skill )
```
**Preparation:** Select a conjugate prior distribution over the model parameters, μ and σ. Take into account the range of each parameter, and select a type of distribution and the parameters of the distribution for μ and for σ. 
```{r}
#range of average skill: any real number.
#range of variability:  positive numbers.

#distribution:  Could be normal   because: mean is normal and variance is Gamma. ? (ask in class)
#μ Normal   because: could take any real number so perhaps normal.
#σ Gamma  because: since those must be positive, perhaps Gamma is best fit, could also be beta.
```
What do you think the typical range of average player skill would be? What do you think typical variability would be? 
```{r}
#I'd assume that average player skill is quite a big range, some players are good some not.
#Based on my knowledge, the worst player in NBA history had career 52% while the best players are around 95%.
#the best players usually stay strong around the 90% while bad ones sometimes are lucky. Let's go with 30%.
```
Plot the probability density functions of your prior using R and be ready to defend your choices in class.
```{r}
#set.seed(2)
avg_skill = mean(c(52:95))
variance = 30

as = plot(rnorm(100,avg_skill,sqrt(variance)),type='l')
```


